var socket,socketConnected=!1;function startWS(host,port){(socket=new Laya.Socket).endian=Laya.Byte.BIG_ENDIAN;let url="ws://"+host+":"+port;socket.connectByUrl(url),socket.on(Laya.Event.OPEN,socket,openHandler),socket.on(Laya.Event.MESSAGE,socket,receiveHandler),socket.on(Laya.Event.CLOSE,socket,closeHandler),socket.on(Laya.Event.ERROR,socket,errorHandler)}function openHandler(event){console.log("Open websocket"),socketConnected=!0}function receiveHandler(msg){let message=decode(msg);processMessage(message)}function closeHandler(e){console.log("Close link")}function errorHandler(e){console.log("Link to server error"+e)}function sendMsg(cmd,proto){if(!socketConnected)return;let netMessage=new NetMessage;netMessage.msgCmd=cmd,netMessage.proto=proto;let bytes=encode(netMessage);socket.send(bytes)}